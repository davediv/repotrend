---
import Layout from "../../layouts/Layout.astro";
import DatePicker from "../../components/DatePicker.astro";
import Toolbar from "../../components/Toolbar.astro";
import ViewToggle from "../../components/ViewToggle.astro";
import RepoCardList from "../../components/RepoCardList.astro";
import { formatDateDisplay, isValidDate } from "../../lib/dates";

export const prerender = false;

const { date } = Astro.params;

if (!date || !isValidDate(date)) {
	return new Response(null, { status: 404, statusText: "Not Found" });
}

const displayDate = formatDateDisplay(date);
---

<Layout title={`Trending ${displayDate} â€” RepoTrend`}>
	<Toolbar>
		<DatePicker selectedDate={date} viewMode="daily" />
		<ViewToggle activeView="daily" currentDate={date} />
	</Toolbar>
	<RepoCardList date={date} />
</Layout>
